#!/usr/bin/env bash

# _dotvim_migrate()
#
# Usage:
#   _dotvim_migrate
_dotvim_migrate() {
  for __file in ~/.janus/*
  do
    local _plugin_directory
    _plugin_directory="$(
      printf "%s\\n" "${__file}" | sed -e 's/.*\/.janus\///'
    )"

    local _git_remote
    _git_remote="$(
      cd "${__file}" && git remote get-url origin
    )"

    if [[ -e "${__file}/.git" ]]
    then
      local _branches
      _branches="$(cd "${__file}" && git branch -a)"
    fi

    _clone_submodule() {
      cd "${HOME}/.vim" &&
        git submodule add "${_git_remote}" "pack/plugins/opt/${_plugin_directory}"
    } && _clone_submodule

    # printf "%s\\n" "${__file}"
    # printf "%s\\n" "${_branches}"
  done

} && _dotvim_migrate
